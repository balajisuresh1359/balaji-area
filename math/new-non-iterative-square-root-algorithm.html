  <div id="imageModal" class="modal">
    <span class="close">&times;</span>
    <div class="modal-content-container" id="modalContainer">
      <img class="modal-content" id="expandedImg">
    </div>
    <div class="zoom-controls">
      <button class="zoom-btn" id="zoom-out">−</button>
      <button class="zoom-btn" id="zoom-in">+</button>
      <button class="zoom-btn" id="zoom-reset">⟲</button>
    </div>
  </div>
  <footer class="bg-gray-700 text-white text-center p-4 mt-auto">
    <p>© 2025 Content licensed under <a href="LICENSE" class="underline">MIT License</a>.</p>
  </footer>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const modal = document.getElementById("imageModal");
      const modalImg = document.getElementById("expandedImg");
      const modalContainer = document.getElementById("modalContainer");
      const closeBtn = document.getElementsByClassName("close")[0];
      const images = document.getElementsByClassName("article-image");
      const zoomIn = document.getElementById("zoom-in");
      const zoomOut = document.getElementById("zoom-out");
      const zoomReset = document.getElementById("zoom-reset");
      
      let currentZoom = 1;
      const zoomStep = 0.25;
      const maxZoom = 3;
      const minZoom = 0.5;
      
      let isDragging = false;
      let startX, startY;
      let translateX = 0;
      let translateY = 0;
      
      function handleZoomIn() {
        if (currentZoom < maxZoom) {
          currentZoom += zoomStep;
          updateZoom();
        }
      }
      
      function handleZoomOut() {
        if (currentZoom > minZoom) {
          currentZoom -= zoomStep;
          updateZoom();
        }
      }
      
      function handleZoomReset() {
        currentZoom = 1;
        translateX = 0;
        translateY = 0;
        updateZoom();
      }
      
      function updateZoom() {
        modalImg.style.transform = `translate(${translateX}px, ${translateY}px) scale(${currentZoom})`;
      }
      
      modalImg.addEventListener('mousedown', function(e) {
        if (currentZoom > 1) {
          isDragging = true;
          startX = e.clientX - translateX;
          startY = e.clientY - translateY;
          modalImg.style.cursor = 'grabbing';
        }
      });
      
      document.addEventListener('mousemove', function(e) {
        if (isDragging) {
          translateX = e.clientX - startX;
          translateY = e.clientY - startY;
          updateZoom();
        }
      });
      
      document.addEventListener('mouseup', function() {
        isDragging = false;
        modalImg.style.cursor = 'grab';
      });
      
      modalImg.addEventListener('touchstart', function(e) {
        if (e.touches.length === 1 && currentZoom > 1) {
          isDragging = true;
          startX = e.touches[0].clientX - translateX;
          startY = e.touches[0].clientY - translateY;
        } else if (e.touches.length === 2) {
          // Pinch zoom logic
          initialDistance = Math.hypot(
            e.touches[0].pageX - e.touches[1].pageX,
            e.touches[0].pageY - e.touches[1].pageY
          );
        }
      }, { passive: false });
      
      document.addEventListener('touchmove', function(e) {
        if (isDragging && e.touches.length === 1) {
          e.preventDefault();
          translateX = e.touches[0].clientX - startX;
          translateY = e.touches[0].clientY - startY;
          updateZoom();
        } else if (e.touches.length === 2) {
          e.preventDefault();
          
          const currentDistance = Math.hypot(
            e.touches[0].pageX - e.touches[1].pageX,
            e.touches[0].pageY - e.touches[1].pageY
          );
          
          if (initialDistance > 0) {
            if (currentDistance > initialDistance + 10 && currentZoom < maxZoom) {
              currentZoom += zoomStep;
              updateZoom();
              initialDistance = currentDistance;
            } else if (currentDistance < initialDistance - 10 && currentZoom > minZoom) {
              currentZoom -= zoomStep;
              updateZoom();
              initialDistance = currentDistance;
            }
          }
        }
      }, { passive: false });
      
      document.addEventListener('touchend', function() {
        isDragging = false;
      });
      
      zoomIn.addEventListener('click', handleZoomIn);
      zoomOut.addEventListener('click', handleZoomOut);
      zoomReset.addEventListener('click', handleZoomReset);
      
      modalImg.addEventListener('wheel', function(e) {
        e.preventDefault();
        if (e.deltaY < 0) {
          handleZoomIn();
        } else {
          handleZoomOut();
        }
      });
      
      let initialDistance = 0;
      
      let lastTap = 0;
      modalImg.addEventListener('touchend', function(e) {
        const currentTime = new Date().getTime();
        const tapLength = currentTime - lastTap;
        
        if (tapLength < 300 && tapLength > 0) {
          if (currentZoom > 1) {
            handleZoomReset();
          } else {
            currentZoom = 2;
            updateZoom();
          }
          e.preventDefault();
        }
        
        lastTap = currentTime;
      });
      
      for (let i = 0; i < images.length; i++) {
        images[i].addEventListener('click', function() {
          modal.style.display = "flex";
          modalImg.src = this.src;
          document.body.style.overflow = "hidden";
          currentZoom = 1;
          translateX = 0;
          translateY = 0;
          updateZoom();
          modalImg.style.cursor = 'grab';
        });
      }
      
      closeBtn.addEventListener('click', function() {
        modal.style.display = "none";
        document.body.style.overflow = ""; 
      });
      
      modal.addEventListener('click', function(event) {
        if (event.target === modal || event.target === modalContainer) {
          modal.style.display = "none";
          document.body.style.overflow = ""; 
        }
      });
      
      document.addEventListener('keydown', function(e) {
        if (modal.style.display === "flex") {
          if (e.key === "Escape") {
            modal.style.display = "none";
            document.body.style.overflow = "";
          } else if (e.key === "+" || e.key === "=") {
            handleZoomIn();
          } else if (e.key === "-") {
            handleZoomOut();
          } else if (e.key === "0") {
            handleZoomReset();
          }
        }
      });
    });
  </script>
</body>
</html>
